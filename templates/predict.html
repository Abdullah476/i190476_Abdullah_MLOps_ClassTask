<!DOCTYPE html>
<html>
	<head>
        <title>PSX Predictor</title>
        <link rel="stylesheet" type="text/css" href= "{{ url_for('static',filename='styles/styles.css') }}">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    </head>
    <body>
        <div style="padding-left: 15px;">
            <h1 style="margin-bottom: 15px;">Predict your values here</h1>
            <input  style="margin-bottom: 10px;" id="click" class="btn btn-primary" type="button" onclick="redirect()" value="Watch live data"/>
            <h2 style="margin-bottom: 10px;">Upload a CSV file below to predict the Close values</h2>
            <form onsubmit="predict()" enctype="multipart/form-data" action="http://localhost:8090/test" method="POST">
                <div style="margin-bottom: 10px;">
                    <input type="file" id="testingFile" name="file" value="Upload CSV file"/>
                    <input class="btn btn-primary" type="submit"/>
                </div>
            </form>
            {% for table in tables %}
                        {{titles[loop.index]}}
                        {{ table|safe }}
            {% endfor %}
        </div>
    </body>
    <script>
        function redirect() {
            data = {"name": "Flask"};
            fetch(
                'http://127.0.0.1:8090/',
                {
                    "method": "POST",
                    "body": JSON.stringify(data)
                }
            )
            .then(data => {
                
            });
            window.location.href = "http://127.0.0.1:8090/";
        }

    </script>
</html>
